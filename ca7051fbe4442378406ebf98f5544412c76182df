{
  "comments": [
    {
      "key": {
        "uuid": "861349a2_106bcb5d",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-07T21:32:44Z",
      "side": 1,
      "message": "Should be called Test, because it is a unit-test and not an integration one, as it doesn\u0027t run inside a Gerrit daemon.",
      "range": {
        "startLine": 34,
        "startChar": 30,
        "endLine": 34,
        "endChar": 32
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bd49ae9_27cd89a4",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 34,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-07T21:39:47Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "861349a2_106bcb5d",
      "range": {
        "startLine": 34,
        "startChar": 30,
        "endLine": 34,
        "endChar": 32
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "78006038_140a51c6",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-07T21:32:44Z",
      "side": 1,
      "message": "This test is for the master branch, it should then not rely on the war from Maven central but instead on a locally built gerrit.war.",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 54
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e46aceba_4b56ef48",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-07T21:39:47Z",
      "side": 1,
      "message": "So, the question is how to pass/use the locally built gerrit.war in the same test. If we find a way how to do it, we can remove the whole Maven copy/link bits entirely.",
      "parentUuid": "78006038_140a51c6",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 54
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "932f6684_ebfbaff1",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-07T21:41:40Z",
      "side": 1,
      "message": "\u003e So, the question is how to pass/use the locally built gerrit.war in the same test. If we find a way how to do it, we can remove the whole Maven copy/link bits entirely.\n\nThe test needs to be executed manually, right? So, it should be simple: just run \u0027bazel build release\u0027 and then open the \u0027bazel-bin/release.war\u0027.",
      "parentUuid": "e46aceba_4b56ef48",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 54
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ac4aaa47_43441b7a",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-07T22:22:27Z",
      "side": 1,
      "message": "Turns out, it is much cooler then that, Bazel rocks! We don\u0027t run the tests manually, and we don\u0027t build release.war in advance.\n\nAll we do is just adding one single line to the plugin junit_test rule:\n\n  junit_tests(\n    name \u003d \"plugin_manager_tests\",\n    srcs \u003d glob([\"src/test/java/**/*.java\"]),\n    data \u003d [\"//:release.war\"],\n    [...]\n\nAnd the rest is Bazel black magic. What Bazel is doing, is building that test pre-requisite for us and allow us to retrieve that artifact from within the tests!\n\nNow we can merge the tests again together and run them from CI. How cool is that?\n\nIn the same way we can start writing integration tests, like communicating with fresh built gerrit and testing say RefTable or Git Protocol V2, etc, p.p.",
      "parentUuid": "932f6684_ebfbaff1",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 54
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "200c15e7_722706ae",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 38,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-09-07T22:37:16Z",
      "side": 1,
      "message": "\u003e Turns out, it is much cooler then that, Bazel rocks! We don\u0027t run the tests manually, and we don\u0027t build release.war in advance.\n\u003e \n\u003e All we do is just adding one single line to the plugin junit_test rule:\n\u003e \n\u003e   junit_tests(\n\u003e     name \u003d \"plugin_manager_tests\",\n\u003e     srcs \u003d glob([\"src/test/java/**/*.java\"]),\n\u003e     data \u003d [\"//:release.war\"],\n\u003e     [...]\n\u003e \n\u003e And the rest is Bazel black magic. What Bazel is doing, is building that test pre-requisite for us and allow us to retrieve that artifact from within the tests!\n\u003e \n\u003e Now we can merge the tests again together and run them from CI. How cool is that?\n\nOh yes, super-cool.\n\nBazel is the coolest build tool I have ever seen ... after Make of course ;-)\n\n\u003e In the same way we can start writing integration tests, like communicating with fresh built gerrit and testing say RefTable or Git Protocol V2, etc, p.p.\n\nYes, indeed.",
      "parentUuid": "ac4aaa47_43441b7a",
      "range": {
        "startLine": 38,
        "startChar": 30,
        "endLine": 38,
        "endChar": 54
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b67547b_c217b941",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/manager/repository/PluginsRepositoryIT.java",
        "patchSetId": 4
      },
      "lineNbr": 88,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-09-07T21:30:37Z",
      "side": 1,
      "message": "This should be imported statically.",
      "range": {
        "startLine": 88,
        "startChar": 66,
        "endLine": 88,
        "endChar": 85
      },
      "revId": "ca7051fbe4442378406ebf98f5544412c76182df",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}